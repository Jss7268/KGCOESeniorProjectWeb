<!DOCTYPE html>
<html ng-app="experiments">
<head>
    <script src="~/Scripts/angular.js"></script>
</head>
<body ng-controller="experimentsController"> 
    <h1>New Experiment Details</h1>
    <form ng-submit="submitExperimentForm()" >
            <label for="description" >Experiment Description: </label><br />
            <input type="text" id="description" ng-model="experiments.description" /> <br />

            <label for="notes">Notes</label><br />
                <input type="text" id="notes" ng-model="experiments.notes" /> <br />
        <input type="submit" value="Submit" />
        <input type="reset" ng-click="resetForm()" value="Reset" />
    </form>
    <script>
        //1. create app module 
        var experiments = angular.module('experiments', []);

        //2. create controller
        experiments.controller("experimentsController", function ($scope, $http) {
  
            //3. attach originalExperiment model object
            $scope.originalExperiment = {
                description: 'Description for new experiment',
                notes: 'Extra notes about experiment'
            };

            //4. copy originalStudent to student. student will be bind to a form 
            $scope.experiments = angular.copy($scope.originalExperiment);

            //5. create submitStudentForm() function. This will be called when user submits the form
            $scope.submitExperimentForm = function () {

                var onSuccess = function (data, status, headers, config) {
                    alert('Experiment saved successfully.');
                };

                var onError = function (data, status, headers, config) {
                    alert('Error occured.');
                }

                $http.post('/experiments/submitData', { student:$scope.experiments })
                    .success(onSuccess)
                    .error(onError);

            };

            //6. create resetForm() function. This will be called on Reset button click.  
            $scope.resetForm = function () {
                $scope.experiments = angular.copy($scope.originalExperiment);
            };
    });
    </script>    
</body>
</html>
